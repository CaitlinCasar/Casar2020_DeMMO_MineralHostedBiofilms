qiime@qiime-190-virtual-box:/media/sf_share/DeMMO_Dec2015toApril2018$ cat DeMMO_Dec2015toAug2017.fasta DeMMO_April2018.fna > DeMMO_Dec2015toApril2018.fasta

qiime@qiime-190-virtual-box:/media/sf_share/DeMMO_Dec2015toApril2018$ filter_fasta.py -f DeMMO_Dec2015toApril2018.fasta --sample_id_fp DeMMO136_Dec2015toApril2018_Map.txt -o DeMMO136_Dec2015toApril2018.fasta

qiime@qiime-190-virtual-box:/media/sf_share/DeMMO_Dec2015toApril2018$ pick_otus.py -i DeMMO136_Dec2015toApril2018.fasta -s 0.99 -o  DeMMO136_Dec2015toApril2018_uclust_picked_otus_99/

qiime@qiime-190-virtual-box:/media/sf_share/DeMMO_Dec2015toApril2018$ pick_rep_set.py -i DeMMO136_Dec2015toApril2018_uclust_picked_otus_99/DeMMO136_Dec2015toApril2018_otus.txt -f DeMMO136_Dec2015toApril2018.fasta -m most_abundant

###did not work, not enough memory###
qiime@qiime-190-virtual-box:/media/sf_share/DeMMO_Dec2015toApril2018$ assign_taxonomy.py -i DeMMO136_Dec2015toApril2018.fasta_rep_set.fasta -t Silva132/consensus_taxonomy_7_levels.txt -r Silva132/silva_132_99_16S.fna -o mothur_assigned_taxonomy/ -m mothur

qiime@qiime-190-virtual-box:/media/sf_share/DeMMO_Dec2015toApril2018$ assign_taxonomy.py -i DeMMO136_Dec2015toApril2018.fasta_rep_set.fasta -t Silva132/consensus_taxonomy_7_levels.txt -r Silva132/silva_132_99_16S.fna --similarity 0.9 --uclust_max_accepts 10 --min_consensus_fraction 0.90 -o uclust_assigned_taxonomy_0.9_10_0.90/ 


make_otu_table.py -i DeMMO136_Dec2015toApril2018_uclust_picked_otus_99/DeMMO136_Dec2015toApril2018_otus.txt -t uclust_assigned_taxonomy_0.9_10_0.90/DeMMO136_Dec2015toApril2018.fasta_rep_set_tax_assignments.txt -o DeMMO_Dec2015_to_April2018_uclust_otu_table.biom

filter_otus_from_otu_table.py -i DeMMO_Dec2015_to_April2018_uclust_otu_table.biom -n 2 -o DeMMO_Dec2015_to_Aug2017_uclust_singleton_filtered_otu_table.biom

sort_otu_table.py -i DeMMO_Dec2015_to_April2018_uclust_singleton_filtered_otu_table.biom -l DeMMO136_Dec2015toApril2018_Map.txt -o DeMMO_Dec2015_to_Aug2017_uclust_singleton_filtered_sorted_otu_table.biom

summarize_taxa.py -i DeMMO_Dec2015_to_April2018_uclust_singleton_filtered_sorted_otu_table.biom -a -o DeMMO_Dec2015_to_Aug2017_uclust_singleton_filtered_abs_summary/ -L 1,2,3,4,5,6,7

sort_otu_table.py -i DeMMO_Dec2015_to_Aug2017_uclust_singleton_filtered_otu_table.biom -l DeMMO136_Dec2015toApril2018_Map_categorized.txt -o DeMMO_Dec2015_to_April2018_uclust_singleton_filtered_categorized_otu_table.biom

summarize_taxa.py -i DeMMO_Dec2015_to_Aug2017_uclust_singleton_filtered_categorized_otu_table.biom -a -o DeMMO_Dec2015_to_April2018_uclust_singleton_filtered_categorized_abs_summary/ -L 1,2,3,4,5,6,7 --suppress_biom_table_output


###rarefy otu table

qiime@qiime-190-virtual-box:/media/sf_share/DeMMO_Dec2015toApril2018$ biom summarize-table -i DeMMO_Dec2015_to_Aug2017_uclust_singleton_filtered_categorized_otu_table.biom -o table_summary.txt

qiime@qiime-190-virtual-box:/media/sf_share/DeMMO_Dec2015toApril2018$ pico table_summary.txt

###3581 was lowest number of seqs (aside from too low: 227)

qiime@qiime-190-virtual-box:/media/sf_share/DeMMO_Dec2015toApril2018$ single_rarefaction.py -i DeMMO_Dec2015_to_Aug2017_uclust_singleton_filtered_categorized_otu_table.biom -d 3581 -o DeMMO_Dec2015_to_Aug2017_uclust_singleton_filtered_categorized_otu_table_filtered_d3581.biom 

summarize_taxa.py -i DeMMO_Dec2015_to_Aug2017_uclust_singleton_filtered_categorized_otu_table_filtered_d3581.biom -a -o DeMMO_Dec2015_to_April2018_uclust_singleton_filtered_categorized_filtered_d3581_abs_summary/ -L 1,2,3,4,5,6,7 --suppress_biom_table_output


